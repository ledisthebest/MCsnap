!function(){function i(i,t){var n=h("<div>").attr("id","mini-map-token-"+i).css({position:"absolute",width:"5%",height:"5%",background:t,top:"0%",left:"0%"});return n}function t(i,t){void 0===window.mini_map_tokens[i]&&(window.mini_map.append(t),window.mini_map_tokens[i]=t)}function n(i){void 0!==window.mini_map_tokens[i]&&(window.mini_map_tokens[i].detach(),delete window.mini_map_tokens[i])}function e(i){return void 0!==window.mini_map_tokens[i]}function o(i,t,n){return void 0!==window.mini_map_tokens[i]?(window.mini_map_tokens[i].css("left",t/11e3*90+"%").css("top",n/11e3*90+"%"),!0):!1}function s(i,t){window.mini_map_pos.text("x: "+i.toFixed(0)+" / y: "+t.toFixed(0))}function d(){var i=window.jQuery;if(window.mini_map_tokens={},0===i("#mini-map-pos").length&&(window.mini_map_pos=i("<div>").attr("id","mini-map-pos").css({}).appendTo(document.body)),0===i("#mini-map-wrapper").length){var t=i("<div>").attr("id","mini-map-wrapper").css({position:"fixed",bottom:"50px",right:"10px",width:"215.5px",height:"215.5px",background:""}),n=i("<div>").attr("id","mini-map").css({width:"67%",height:"67%",position:"relative"});t.append(n).appendTo(document.body),window.mini_map=n}}function a(i,t,n,e,o,s){l[i]=this,this.id=i,this.ox=this.x=t,this.oy=this.y=n,this.oSize=this.size=e,this.color=o,this.points=[],this.pointsAcc=[],this.setName(s)}function r(i,t,n){Object.defineProperty(i,n,{get:function(){return t[n]},set:function(i){t[n]=i},enumerable:!0,configurable:!0})}function u(i,t){var n=+new Date,e=Math.random(),o=t,s=i.getUint16(o,!0);o+=2;for(var d=0;s>d;++d){var r=l[i.getUint32(o,!0)],u=l[i.getUint32(o+4,!0)],o=o+8;r&&u&&(u.destroy(),u.ox=u.x,u.oy=u.y,u.oSize=u.size,u.nx=r.x,u.ny=r.y,u.nSize=u.size,u.updateTime=n)}for(d=0;;){var c=i.getUint32(o,!0);if(o+=4,0==c)break;++d;var r=i.getInt16(o,!0),o=o+2,u=i.getInt16(o,!0),o=o+2;g=i.getInt16(o,!0),o+=2;for(var p=i.getUint8(o++),m=i.getUint8(o++),h=i.getUint8(o++),p=(p<<16|m<<8|h).toString(16);6>p.length;)p="0"+p;var p="#"+p,w=i.getUint8(o++),m=!!(1&w),h=!!(16&w);2&w&&(o+=4),4&w&&(o+=8),8&w&&(o+=16);for(var y,w="";y=i.getUint16(o,!0),o+=2,0!=y;)w+=String.fromCharCode(y);y=w,w=null,l.hasOwnProperty(c)?(w=l[c],w.updatePos(),w.ox=w.x,w.oy=w.y,w.oSize=w.size,w.color=p):(w=new a(c,r,u,g,p,y),w.pX=r,w.pY=u),w.isVirus=m,w.isAgitated=h,w.nx=r,w.ny=u,w.nSize=g,w.updateCode=e,w.updateTime=n,y&&w.setName(y)}for(e=i.getUint32(o,!0),o+=4,d=0;e>d;d++)c=i.getUint32(o,!0),o+=4,w=l[c],null!=w&&w.destroy()}function c(i){var t=0,n=new DataView(i.data);switch(240==n.getUint8(t)&&(t+=5),n.getUint8(t++)){case 16:u(n,t);break;case 20:w=[];break;case 32:var e=n.getUint32(t,!0);w.push(e)}}var p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(p)return document.getElementById("minimap").style.display="none",document.getElementById("musicList").style.display="none",document.getElementById("toggleMusicListInputsBar").style.display="none",document.getElementById("musicList").style.display="none",document.getElementById("musicAutoPlayStatusCheckBox").style.display="none",!1;var m=window.WebSocket,h=window.jQuery,l=[],w=[];a.prototype={id:0,points:null,pointsAcc:null,name:null,nameCache:null,sizeCache:null,x:0,y:0,size:0,ox:0,oy:0,oSize:0,nx:0,ny:0,nSize:0,updateTime:0,updateCode:0,drawTime:0,destroyed:!1,isVirus:!1,isAgitated:!1,wasSimpleDrawing:!0,destroy:function(){delete l[this.id],id=w.indexOf(this.id),-1!=id&&w.splice(id,1),this.destroyed=!0,n(this.id)},setName:function(i){this.name=i},updatePos:function(){-1!=w.indexOf(this.id)&&(e(this.id)||t(this.id,i(this.id,this.color)),o(this.id,this.nx,this.ny),s(this.nx,this.ny))}},window.WebSocket=function(i,t){void 0===t&&(t=[]);var n=new m(i,t);r(this,n,"binaryType"),r(this,n,"bufferedAmount"),r(this,n,"extensions"),r(this,n,"protocol"),r(this,n,"readyState"),r(this,n,"url"),this.send=function(i){return n.send.call(n,i)},this.close=function(i,t){return n.close.call(n,i,t)},this.onopen=function(){},this.onclose=function(){},this.onerror=function(){},this.onmessage=function(){},n.onopen=function(i){return null!=this.onopen?this.onopen.call(n,i):void 0}.bind(this),n.onmessage=function(i){return null!=this.onmessage?(c(i),this.onmessage.call(n,i)):void 0}.bind(this),n.onclose=function(i){return this.onclose.call(n,i)}.bind(this),n.onerror=function(i){return this.onerror.call(n,i)}.bind(this)},window.WebSocket.prototype=m,d()}();